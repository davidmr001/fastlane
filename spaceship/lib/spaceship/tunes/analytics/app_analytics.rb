module Spaceship
  class AppAnalytics
    # @return (String) The app ID to grab analytics for
    attr_reader :apple_id
    # @return (TunesClient) the client to use for fetching data.
    attr_reader :tunes_client

    def initialize(tunes_client, apple_id)
      @tunes_client = tunes_client
      @apple_id = apple_id.to_s
    end

    def ITC_API_DOCUMENTATION
      ## Overview

      # Q {"adamId":["1005050125"],"frequency":"WEEK","measures":["pageViewCount","units","iap","sales","activeDevices","sessions","payingUsers","crashes"],"startTime":null,"endTime":"2016-02-29T00:00:00Z"}
      # R {"size":8,"results":[{"adamId":"1005050125","measure":"pageViewCount","total":32491.0,"type":"COUNT","previousTotal":43893.0,"percentChange":-0.26,"data":[{"date":"2016-03-03T00:00:00Z","value":4689.0},{"date":"2016-03-04T00:00:00Z","value":4318.0},{"date":"2016-03-05T00:00:00Z","value":5969.0},{"date":"2016-03-06T00:00:00Z","value":5571.0},{"date":"2016-03-07T00:00:00Z","value":3437.0},{"date":"2016-03-08T00:00:00Z","value":4250.0},{"date":"2016-03-09T00:00:00Z","value":4257.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"units","total":948.0,"type":"COUNT","previousTotal":831.0,"percentChange":0.14,"data":[{"date":"2016-03-03T00:00:00Z","value":128.0},{"date":"2016-03-04T00:00:00Z","value":107.0},{"date":"2016-03-05T00:00:00Z","value":153.0},{"date":"2016-03-06T00:00:00Z","value":147.0},{"date":"2016-03-07T00:00:00Z","value":98.0},{"date":"2016-03-08T00:00:00Z","value":235.0},{"date":"2016-03-09T00:00:00Z","value":80.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"iap","total":0.0,"type":"COUNT","previousTotal":0.0,"percentChange":0.0,"data":[{"date":"2016-03-03T00:00:00Z","value":0.0},{"date":"2016-03-04T00:00:00Z","value":0.0},{"date":"2016-03-05T00:00:00Z","value":0.0},{"date":"2016-03-06T00:00:00Z","value":0.0},{"date":"2016-03-07T00:00:00Z","value":0.0},{"date":"2016-03-08T00:00:00Z","value":0.0},{"date":"2016-03-09T00:00:00Z","value":0.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"sales","total":8563.0,"type":"COUNT","previousTotal":7485.0,"percentChange":0.14,"data":[{"date":"2016-03-03T00:00:00Z","value":1141.0},{"date":"2016-03-04T00:00:00Z","value":966.0},{"date":"2016-03-05T00:00:00Z","value":1384.0},{"date":"2016-03-06T00:00:00Z","value":1334.0},{"date":"2016-03-07T00:00:00Z","value":886.0},{"date":"2016-03-08T00:00:00Z","value":2130.0},{"date":"2016-03-09T00:00:00Z","value":721.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"activeDevices","total":312.0,"type":"AVERAGE","previousTotal":268.0,"percentChange":0.16,"data":[{"date":"2016-03-03T00:00:00Z","value":255.0},{"date":"2016-03-04T00:00:00Z","value":363.0},{"date":"2016-03-05T00:00:00Z","value":397.0},{"date":"2016-03-06T00:00:00Z","value":379.0},{"date":"2016-03-07T00:00:00Z","value":281.0},{"date":"2016-03-08T00:00:00Z","value":287.0},{"date":"2016-03-09T00:00:00Z","value":218.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"sessions","total":5123.0,"type":"COUNT","previousTotal":4339.0,"percentChange":0.18,"data":[{"date":"2016-03-03T00:00:00Z","value":585.0},{"date":"2016-03-04T00:00:00Z","value":857.0},{"date":"2016-03-05T00:00:00Z","value":991.0},{"date":"2016-03-06T00:00:00Z","value":902.0},{"date":"2016-03-07T00:00:00Z","value":625.0},{"date":"2016-03-08T00:00:00Z","value":661.0},{"date":"2016-03-09T00:00:00Z","value":502.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"payingUsers","total":135.0,"type":"AVERAGE","previousTotal":119.0,"percentChange":0.13,"data":[{"date":"2016-03-03T00:00:00Z","value":127.0},{"date":"2016-03-04T00:00:00Z","value":107.0},{"date":"2016-03-05T00:00:00Z","value":153.0},{"date":"2016-03-06T00:00:00Z","value":147.0},{"date":"2016-03-07T00:00:00Z","value":98.0},{"date":"2016-03-08T00:00:00Z","value":235.0},{"date":"2016-03-09T00:00:00Z","value":80.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"crashes","total":70.0,"type":"COUNT","previousTotal":63.0,"percentChange":0.11,"data":[{"date":"2016-03-03T00:00:00Z","value":6.0},{"date":"2016-03-04T00:00:00Z","value":14.0},{"date":"2016-03-05T00:00:00Z","value":10.0},{"date":"2016-03-06T00:00:00Z","value":14.0},{"date":"2016-03-07T00:00:00Z","value":10.0},{"date":"2016-03-08T00:00:00Z","value":9.0},{"date":"2016-03-09T00:00:00Z","value":7.0}],"meetsThreshold":true}]}
      "data/app/detail/measures"

      # Q {"adamId":["1005050125"],"measures":["pageViewCount","units","sales","sessions"]}
      # R {"adamId":"1005050125","data":{"sessions":81138.0,"pageViewCount":295727.0,"units":14882.0,"sales":133143.0},"meetsThreshold":true}
      "data/app/detail/all-time"

      ## Metrics

      # Q {"adamId":["1005050125"],"frequency":"DAY","measure":"units","dimensions":["storefront"],"startTime":"2016-03-03T00:00:00Z","endTime":"2016-03-09T00:00:00Z","limit":5,"hideEmptyValues":true}
      # R {"size":1,"results":[{"adamId":"1005050125","measure":"units","dimension":"storefront","type":"COUNT","data":[{"key":"143457","value":766.0,"meetsThreshold":true},{"key":"143458","value":49.0,"meetsThreshold":true},{"key":"143441","value":39.0,"meetsThreshold":true},{"key":"143456","value":31.0,"meetsThreshold":true},{"key":"143442","value":17.0,"meetsThreshold":true}]}]}
      "data/app/detail/dimensions"

      # Q {"adamId":["1005050125"],"frequency":"DAY","endTime":"2016-03-08T00:00:00Z","dimensionFilters":[],"startTime":"2016-02-09T00:00:00Z","mini":true}
      # R {"adamId":"1005050125","results":[{"appPurchase":"2016-02-09T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-10T00:00:00Z","retentionPercentage":0.53,"value":9.0,"day":1},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.24,"value":4.0,"day":7},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.18,"value":3.0,"day":14},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.0,"value":0.0,"day":21},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.0,"value":0.0,"day":28}]},{"appPurchase":"2016-02-16T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.27,"value":3.0,"day":1},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.27,"value":3.0,"day":7},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.09,"value":1.0,"day":14},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.09,"value":1.0,"day":21}]},{"appPurchase":"2016-02-23T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.28,"value":7.0,"day":1},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.44,"value":11.0,"day":7},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.28,"value":7.0,"day":14}]},{"appPurchase":"2016-03-01T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.61,"value":20.0,"day":1},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.12,"value":4.0,"day":7}]},{"appPurchase":"2016-03-07T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.5,"value":8.0,"day":1}]}]}
      "data/app/detail/retention"

      # Q {"adamId":"1005050125","results":[{"appPurchase":"2016-02-09T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-10T00:00:00Z","retentionPercentage":0.53,"value":9.0,"day":1},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.24,"value":4.0,"day":7},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.18,"value":3.0,"day":14},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.0,"value":0.0,"day":21},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.0,"value":0.0,"day":28}]},{"appPurchase":"2016-02-16T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.27,"value":3.0,"day":1},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.27,"value":3.0,"day":7},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.09,"value":1.0,"day":14},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.09,"value":1.0,"day":21}]},{"appPurchase":"2016-02-23T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.28,"value":7.0,"day":1},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.44,"value":11.0,"day":7},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.28,"value":7.0,"day":14}]},{"appPurchase":"2016-03-01T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.61,"value":20.0,"day":1},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.12,"value":4.0,"day":7}]},{"appPurchase":"2016-03-07T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.5,"value":8.0,"day":1}]}]}
      # A {"size":8,"results":[{"adamId":"1005050125","measure":"pageViewCount","total":32491.0,"type":"COUNT","previousTotal":43893.0,"percentChange":-0.26,"data":[{"date":"2016-03-03T00:00:00Z","value":4689.0},{"date":"2016-03-04T00:00:00Z","value":4318.0},{"date":"2016-03-05T00:00:00Z","value":5969.0},{"date":"2016-03-06T00:00:00Z","value":5571.0},{"date":"2016-03-07T00:00:00Z","value":3437.0},{"date":"2016-03-08T00:00:00Z","value":4250.0},{"date":"2016-03-09T00:00:00Z","value":4257.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"units","total":948.0,"type":"COUNT","previousTotal":831.0,"percentChange":0.14,"data":[{"date":"2016-03-03T00:00:00Z","value":128.0},{"date":"2016-03-04T00:00:00Z","value":107.0},{"date":"2016-03-05T00:00:00Z","value":153.0},{"date":"2016-03-06T00:00:00Z","value":147.0},{"date":"2016-03-07T00:00:00Z","value":98.0},{"date":"2016-03-08T00:00:00Z","value":235.0},{"date":"2016-03-09T00:00:00Z","value":80.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"iap","total":0.0,"type":"COUNT","previousTotal":0.0,"percentChange":0.0,"data":[{"date":"2016-03-03T00:00:00Z","value":0.0},{"date":"2016-03-04T00:00:00Z","value":0.0},{"date":"2016-03-05T00:00:00Z","value":0.0},{"date":"2016-03-06T00:00:00Z","value":0.0},{"date":"2016-03-07T00:00:00Z","value":0.0},{"date":"2016-03-08T00:00:00Z","value":0.0},{"date":"2016-03-09T00:00:00Z","value":0.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"sales","total":8563.0,"type":"COUNT","previousTotal":7485.0,"percentChange":0.14,"data":[{"date":"2016-03-03T00:00:00Z","value":1141.0},{"date":"2016-03-04T00:00:00Z","value":966.0},{"date":"2016-03-05T00:00:00Z","value":1384.0},{"date":"2016-03-06T00:00:00Z","value":1334.0},{"date":"2016-03-07T00:00:00Z","value":886.0},{"date":"2016-03-08T00:00:00Z","value":2130.0},{"date":"2016-03-09T00:00:00Z","value":721.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"activeDevices","total":312.0,"type":"AVERAGE","previousTotal":268.0,"percentChange":0.16,"data":[{"date":"2016-03-03T00:00:00Z","value":255.0},{"date":"2016-03-04T00:00:00Z","value":363.0},{"date":"2016-03-05T00:00:00Z","value":397.0},{"date":"2016-03-06T00:00:00Z","value":379.0},{"date":"2016-03-07T00:00:00Z","value":281.0},{"date":"2016-03-08T00:00:00Z","value":287.0},{"date":"2016-03-09T00:00:00Z","value":218.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"sessions","total":5123.0,"type":"COUNT","previousTotal":4339.0,"percentChange":0.18,"data":[{"date":"2016-03-03T00:00:00Z","value":585.0},{"date":"2016-03-04T00:00:00Z","value":857.0},{"date":"2016-03-05T00:00:00Z","value":991.0},{"date":"2016-03-06T00:00:00Z","value":902.0},{"date":"2016-03-07T00:00:00Z","value":625.0},{"date":"2016-03-08T00:00:00Z","value":661.0},{"date":"2016-03-09T00:00:00Z","value":502.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"payingUsers","total":135.0,"type":"AVERAGE","previousTotal":119.0,"percentChange":0.13,"data":[{"date":"2016-03-03T00:00:00Z","value":127.0},{"date":"2016-03-04T00:00:00Z","value":107.0},{"date":"2016-03-05T00:00:00Z","value":153.0},{"date":"2016-03-06T00:00:00Z","value":147.0},{"date":"2016-03-07T00:00:00Z","value":98.0},{"date":"2016-03-08T00:00:00Z","value":235.0},{"date":"2016-03-09T00:00:00Z","value":80.0}],"meetsThreshold":true},{"adamId":"1005050125","measure":"crashes","total":70.0,"type":"COUNT","previousTotal":63.0,"percentChange":0.11,"data":[{"date":"2016-03-03T00:00:00Z","value":6.0},{"date":"2016-03-04T00:00:00Z","value":14.0},{"date":"2016-03-05T00:00:00Z","value":10.0},{"date":"2016-03-06T00:00:00Z","value":14.0},{"date":"2016-03-07T00:00:00Z","value":10.0},{"date":"2016-03-08T00:00:00Z","value":9.0},{"date":"2016-03-09T00:00:00Z","value":7.0}],"meetsThreshold":true}]}
      "data/app/detail/measures"

      # METRICSVIEW
      # A [{"id":"98ca0ac0-3ace-11e5-897d-5b86fdca29ec","preferenceName":"New Users per View by Territory","preferenceType":"METRICSVIEW","preferenceData":{"zoom":"day","measure":"units","type":"ratio","compare_to":"pageViewCount","view_by":1}},{"id":"98d77840-3ace-11e5-897d-5b86fdca29ec","preferenceName":"Sessions per Device by Platform","preferenceType":"METRICSVIEW","preferenceData":{"zoom":"day","measure":"sessions","type":"ratio","compare_to":"activeDevices","view_by":2}}]
      # usefull to fetch predefined queries.
      "userpreferences/METRICSVIEW"

      # A {"size":2,"results":[{"type":"GLOBAL","title":"iOS 9.0 (estimated)","message":"With the release of iOS 9, you may see a change in your opt-in rate.","categories":["2"],"date":"2015-09-16T00:00:00Z"},{"type":"GLOBAL","title":"iOS 8.4.1 (estimated)","message":null,"categories":["2"],"date":"2015-08-13T00:00:00Z"}]}
      "data/events"
      # Q {"adamId":["1005050125"],"startTime":"2016-02-29T00:00:00Z","endTime":"2016-03-06T00:00:00Z","frequency":"DAY","measure":"pageViewCount","dimensions":[{"rank":"DESCENDING","dimension":"appVersion","limit":200},{"rank":"DESCENDING","dimension":"campaignId","limit":200},{"rank":"DESCENDING","dimension":"domainReferrer","limit":200}],"dimensionFilters":[]}
      # A {"size":3,"results":[{"adamId":"1005050125","dimension":"appVersion","actualSize":10,"values":[{"id":"1.5.0 (1.5.0)","date":"2016-03-07T11:14:07Z","title":"1.5.0 (iOS)"},{"id":"1.4.1 (1.4.1)","date":"2016-02-04T14:25:26Z","title":"1.4.1 (iOS)"},{"id":"1.3 (1.3)","date":"2015-12-12T07:38:59Z","title":"1.3 (iOS)"},{"id":"1.2 (1.2)","date":"2015-11-26T10:36:50Z","title":"1.2 (iOS)"},{"id":"1.1 (1.1)","date":"2015-11-02T12:58:47Z","title":"1.1 (iOS)"},{"id":"1.0.5 (1.0.5)","date":"2015-10-23T21:48:28Z","title":"1.0.5 (iOS)"},{"id":"1.0.4 (1.0.4)","date":"2015-10-13T00:03:26Z","title":"1.0.4 (iOS)"},{"id":"1.0.3 (1.0.3)","date":"2015-10-01T14:57:24Z","title":"1.0.3 (iOS)"},{"id":"1.0.1 (1.0.1)","date":"2015-08-28T22:26:04Z","title":"1.0.1 (iOS)"},{"id":"1.0 (1.0)","date":"2015-07-10T09:58:11Z","title":"1.0 (iOS)"}]},{"adamId":"1005050125","dimension":"campaignId","actualSize":0,"values":[]},{"adamId":"1005050125","dimension":"domainReferrer","actualSize":10,"values":[{"id":"app-enfant.fr","title":"app-enfant.fr"},{"id":"bestappsforkids.com","title":"bestappsforkids.com"},{"id":"dragonbox.com","title":"dragonbox.com"},{"id":"google.com","title":"google.com"},{"id":"google.dk","title":"google.dk"},{"id":"google.no","title":"google.no"},{"id":"itunes.com","title":"itunes.com"},{"id":"pappasappar.se","title":"pappasappar.se"},{"id":"souris-grise.fr","title":"souris-grise.fr"},{"id":"xn--godeappstilbrn-1qb.dk","title":"xn--godeappstilbrn-1qb.dk"}]}]}
      "data/dimension-values"

      # Q {"adamId":["1005050125"],"frequency":"DAY","measures":["units","pageViewCount"],"group":{"metric":"units","dimension":"storefront","rank":"DESCENDING","limit":3},"dimensionFilters":[{"dimensionKey":"platform","optionKeys":["iPad"]}],"startTime":"2016-03-03T00:00:00Z","endTime":"2016-03-09T00:00:00Z"}
      # Q {"adamId":["1005050125"],"frequency":"DAY","measures":["pageViewCount"],"group":null,"dimensionFilters":[],"startTime":"2016-03-03T00:00:00Z","endTime":"2016-03-09T00:00:00Z"}

      # A {"size":1,"results":[{"adamId":"1005050125","meetsThreshold":true,"group":null,"data":[{"date":"2016-03-03T00:00:00Z","pageViewCount":4689.0},{"date":"2016-03-04T00:00:00Z","pageViewCount":4318.0},{"date":"2016-03-05T00:00:00Z","pageViewCount":5969.0},{"date":"2016-03-06T00:00:00Z","pageViewCount":5571.0},{"date":"2016-03-07T00:00:00Z","pageViewCount":3437.0},{"date":"2016-03-08T00:00:00Z","pageViewCount":4250.0},{"date":"2016-03-09T00:00:00Z","pageViewCount":4257.0}],"totals":{"value":32491.0,"rawValue":null,"type":"COUNT","key":"pageViewCount"}}]}

      # many dimensions, not enough data:
      # Q "adamId":["1005050125"],"frequency":"DAY","measures":["pageViewCount"],"group":null,"dimensionFilters":[{"dimensionKey":"platformVersion","optionKeys":["iOS 9.1"]},{"dimensionKey":"platform","optionKeys":["AppleTV"]}],"startTime":"2016-03-04T00:00:00Z","endTime":"2016-03-10T00:00:00Z"}
      # A {"size":1,"results":[{"adamId":"1005050125","meetsThreshold":false,"group":null,"data":[{"date":"2016-03-04T00:00:00Z","pageViewCount":-1.0},{"date":"2016-03-05T00:00:00Z","pageViewCount":-1.0},{"date":"2016-03-06T00:00:00Z","pageViewCount":-1.0},{"date":"2016-03-07T00:00:00Z","pageViewCount":-1.0},{"date":"2016-03-08T00:00:00Z","pageViewCount":-1.0},{"date":"2016-03-09T00:00:00Z","pageViewCount":-1.0},{"date":"2016-03-10T00:00:00Z","pageViewCount":-1.0}],"totals":{"value":0.0,"rawValue":null,"type":"COUNT","key":"pageViewCount"}}]}
      "data/time-series"

      ## Sources

      # Q: {"adamId":["1005050125"],"measures":["pageViewCount","units","sales","sessions"],"frequency":"DAY","endTime":"2016-03-09T00:00:00Z","startTime":"2016-03-03T00:00:00Z"}
      # A: {"size":12,"results":[{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":7.0,"value":4.0,"percentChange":-0.43},"pageViewCount":{"previousValue":5.0,"value":5.0,"percentChange":0.0},"units":{"previousValue":3.0,"value":2.0,"percentChange":-0.33},"sales":{"previousValue":24.0,"value":18.0,"percentChange":-0.25}},"domainReferrer":"app-enfant.fr"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":1.0,"value":1.0,"percentChange":0.0},"pageViewCount":{"previousValue":1.0,"value":2.0,"percentChange":1.0},"units":{"previousValue":1.0,"value":1.0,"percentChange":0.0},"sales":{"previousValue":8.0,"value":8.0,"percentChange":0.0}},"domainReferrer":"bestappsforkids.com"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":127.0,"value":127.0,"percentChange":0.0},"pageViewCount":{"previousValue":25.0,"value":28.0,"percentChange":0.12},"units":{"previousValue":10.0,"value":6.0,"percentChange":-0.4},"sales":{"previousValue":84.0,"value":51.0,"percentChange":-0.39}},"domainReferrer":"dragonbox.com"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":0.0,"value":0.0,"percentChange":0.0},"pageViewCount":{"previousValue":1.0,"value":4.0,"percentChange":3.0},"units":{"previousValue":0.0,"value":0.0,"percentChange":0.0},"sales":{"previousValue":0.0,"value":0.0,"percentChange":0.0}},"domainReferrer":"google.co.uk"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":1.0,"value":0.0,"percentChange":-1.0},"pageViewCount":{"previousValue":4.0,"value":2.0,"percentChange":-0.5},"units":{"previousValue":2.0,"value":2.0,"percentChange":0.0},"sales":{"previousValue":17.0,"value":17.0,"percentChange":0.0}},"domainReferrer":"google.com"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":0.0,"value":0.0,"percentChange":0.0},"pageViewCount":{"previousValue":1.0,"value":1.0,"percentChange":0.0},"units":{"previousValue":0.0,"value":1.0,"percentChange":0.0},"sales":{"previousValue":0.0,"value":9.0,"percentChange":0.0}},"domainReferrer":"google.dk"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":0.0,"value":2.0,"percentChange":0.0},"pageViewCount":{"previousValue":1.0,"value":1.0,"percentChange":0.0},"units":{"previousValue":1.0,"value":0.0,"percentChange":-1.0},"sales":{"previousValue":9.0,"value":0.0,"percentChange":-1.0}},"domainReferrer":"google.fr"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":17.0,"value":14.0,"percentChange":-0.18},"pageViewCount":{"previousValue":13.0,"value":23.0,"percentChange":0.77},"units":{"previousValue":6.0,"value":8.0,"percentChange":0.33},"sales":{"previousValue":55.0,"value":73.0,"percentChange":0.33}},"domainReferrer":"google.no"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":19.0,"value":41.0,"percentChange":1.16},"pageViewCount":{"previousValue":26.0,"value":16.0,"percentChange":-0.38},"units":{"previousValue":0.0,"value":1.0,"percentChange":0.0},"sales":{"previousValue":0.0,"value":8.0,"percentChange":0.0}},"domainReferrer":"itunes.com"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":44.0,"value":89.0,"percentChange":1.02},"pageViewCount":{"previousValue":20.0,"value":16.0,"percentChange":-0.2},"units":{"previousValue":10.0,"value":12.0,"percentChange":0.2},"sales":{"previousValue":97.0,"value":118.0,"percentChange":0.22}},"domainReferrer":"pappasappar.se"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":32.0,"value":36.0,"percentChange":0.13},"pageViewCount":{"previousValue":8.0,"value":10.0,"percentChange":0.25},"units":{"previousValue":3.0,"value":3.0,"percentChange":0.0},"sales":{"previousValue":26.0,"value":26.0,"percentChange":0.0}},"domainReferrer":"souris-grise.fr"},{"adamId":"1005050125","startTime":"2016-02-25T00:00:00Z","endTime":"2016-03-03T00:00:00Z","data":{"sessions":{"previousValue":13.0,"value":2.0,"percentChange":-0.85},"pageViewCount":{"previousValue":5.0,"value":4.0,"percentChange":-0.2},"units":{"previousValue":3.0,"value":1.0,"percentChange":-0.67},"sales":{"previousValue":26.0,"value":9.0,"percentChange":-0.65}},"domainReferrer":"xn--godeappstilbrn-1qb.dk"}]}
      "data/sources/domainreferrer-list"

      # Q: {"adamId":["1005050125"],"measures":["pageViewCount","units","sales","sessions"],"purchaseDate":{"frequency":"WEEK","date":"2016-02-29T00:00:00Z"},"trackingPeriod":{"startTime":"2016-02-29T00:00:00Z","endTime":"2016-03-09T00:00:00Z"}}
      # A: {"size":4,"results":[{"adamId":"1005050125","data":{"sessions":15.0,"pageViewCount":22.0,"units":7.0,"sales":60.0},"domainReferrer":"dragonbox.com"},{"adamId":"1005050125","data":{"sessions":1.0,"pageViewCount":15.0,"units":5.0,"sales":46.0},"domainReferrer":"google.no"},{"adamId":"1005050125","data":{"sessions":14.0,"pageViewCount":15.0,"units":10.0,"sales":98.0},"domainReferrer":"pappasappar.se"},{"adamId":"1005050125","data":{"sessions":11.0,"pageViewCount":12.0,"units":5.0,"sales":43.0},"domainReferrer":"souris-grise.fr"}]}
      "data/sources/domainreferrer-list-cohort"

      # Q: {"adamId":["1005050125"],"measures":["pageViewCount","units","sales","sessions"],"frequency":"DAY","endTime":"2016-03-09T00:00:00Z","startTime":"2016-03-03T00:00:00Z"}
      # A: {"size":0,"results":[]}
      "data/sources/campaign-list"

      ## Retention
      # Q: {"adamId":["1005050125"],"frequency":"DAY","endTime":"2016-03-08T00:00:00Z","dimensionFilters":[],"startTime":"2016-02-09T00:00:00Z"}
      # A: {"adamId":"1005050125","results":[{"appPurchase":"2016-02-09T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-09T00:00:00Z","retentionPercentage":1.0,"value":17.0},{"date":"2016-02-10T00:00:00Z","retentionPercentage":0.53,"value":9.0},{"date":"2016-02-11T00:00:00Z","retentionPercentage":0.41,"value":7.0},{"date":"2016-02-12T00:00:00Z","retentionPercentage":0.35,"value":6.0},{"date":"2016-02-13T00:00:00Z","retentionPercentage":0.24,"value":4.0},{"date":"2016-02-14T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-02-15T00:00:00Z","retentionPercentage":0.29,"value":5.0},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.24,"value":4.0},{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.18,"value":3.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.24,"value":4.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.18,"value":3.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.18,"value":3.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.0,"value":0.0}]},{"appPurchase":"2016-02-10T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-10T00:00:00Z","retentionPercentage":1.0,"value":17.0},{"date":"2016-02-11T00:00:00Z","retentionPercentage":0.24,"value":4.0},{"date":"2016-02-12T00:00:00Z","retentionPercentage":0.24,"value":4.0},{"date":"2016-02-13T00:00:00Z","retentionPercentage":0.24,"value":4.0},{"date":"2016-02-14T00:00:00Z","retentionPercentage":0.35,"value":6.0},{"date":"2016-02-15T00:00:00Z","retentionPercentage":0.18,"value":3.0},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.18,"value":3.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.35,"value":6.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.24,"value":4.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.24,"value":4.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.18,"value":3.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.18,"value":3.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.12,"value":2.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.06,"value":1.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.12,"value":2.0}]},{"appPurchase":"2016-02-11T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-11T00:00:00Z","retentionPercentage":1.0,"value":15.0},{"date":"2016-02-12T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-02-13T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-02-14T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-02-15T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.4,"value":6.0},{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.27,"value":4.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.4,"value":6.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.13,"value":2.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.27,"value":4.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.13,"value":2.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.13,"value":2.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.13,"value":2.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.2,"value":3.0}]},{"appPurchase":"2016-02-12T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-12T00:00:00Z","retentionPercentage":1.0,"value":11.0},{"date":"2016-02-13T00:00:00Z","retentionPercentage":0.82,"value":9.0},{"date":"2016-02-14T00:00:00Z","retentionPercentage":0.45,"value":5.0},{"date":"2016-02-15T00:00:00Z","retentionPercentage":0.36,"value":4.0},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.36,"value":4.0},{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.45,"value":5.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.0,"value":0.0}]},{"appPurchase":"2016-02-13T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-13T00:00:00Z","retentionPercentage":1.0,"value":27.0},{"date":"2016-02-14T00:00:00Z","retentionPercentage":0.67,"value":18.0},{"date":"2016-02-15T00:00:00Z","retentionPercentage":0.33,"value":9.0},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.33,"value":9.0},{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.22,"value":6.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.19,"value":5.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.26,"value":7.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.11,"value":3.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.11,"value":3.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.19,"value":5.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.11,"value":3.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.11,"value":3.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.22,"value":6.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.19,"value":5.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.07,"value":2.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.07,"value":2.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.11,"value":3.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.04,"value":1.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.22,"value":6.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.22,"value":6.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.11,"value":3.0}]},{"appPurchase":"2016-02-14T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-14T00:00:00Z","retentionPercentage":1.0,"value":26.0},{"date":"2016-02-15T00:00:00Z","retentionPercentage":0.69,"value":18.0},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.35,"value":9.0},{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.31,"value":8.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.46,"value":12.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.27,"value":7.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.5,"value":13.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.27,"value":7.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.04,"value":1.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.12,"value":3.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.19,"value":5.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.04,"value":1.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.12,"value":3.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.04,"value":1.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.08,"value":2.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.08,"value":2.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.12,"value":3.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.15,"value":4.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.19,"value":5.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.04,"value":1.0}]},{"appPurchase":"2016-02-15T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-15T00:00:00Z","retentionPercentage":1.0,"value":12.0},{"date":"2016-02-16T00:00:00Z","retentionPercentage":0.58,"value":7.0},{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.33,"value":4.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.25,"value":3.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.33,"value":4.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.33,"value":4.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.33,"value":4.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.25,"value":3.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.33,"value":4.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.25,"value":3.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.17,"value":2.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.17,"value":2.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.17,"value":2.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.0,"value":0.0}]},{"appPurchase":"2016-02-16T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-16T00:00:00Z","retentionPercentage":1.0,"value":11.0},{"date":"2016-02-17T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.45,"value":5.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.36,"value":4.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.36,"value":4.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.09,"value":1.0}]},{"appPurchase":"2016-02-17T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-17T00:00:00Z","retentionPercentage":1.0,"value":6.0},{"date":"2016-02-18T00:00:00Z","retentionPercentage":0.67,"value":4.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.33,"value":2.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.33,"value":2.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.33,"value":2.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.17,"value":1.0}]},{"appPurchase":"2016-02-18T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-18T00:00:00Z","retentionPercentage":1.0,"value":13.0},{"date":"2016-02-19T00:00:00Z","retentionPercentage":0.31,"value":4.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.15,"value":2.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.15,"value":2.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.31,"value":4.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.15,"value":2.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.23,"value":3.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.15,"value":2.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.15,"value":2.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.15,"value":2.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.15,"value":2.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.08,"value":1.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.0,"value":0.0}]},{"appPurchase":"2016-02-19T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-19T00:00:00Z","retentionPercentage":1.0,"value":8.0},{"date":"2016-02-20T00:00:00Z","retentionPercentage":0.63,"value":5.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.5,"value":4.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.13,"value":1.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.13,"value":1.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.13,"value":1.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.25,"value":2.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.13,"value":1.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.13,"value":1.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.13,"value":1.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.13,"value":1.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.13,"value":1.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.0,"value":0.0}]},{"appPurchase":"2016-02-20T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-20T00:00:00Z","retentionPercentage":1.0,"value":30.0},{"date":"2016-02-21T00:00:00Z","retentionPercentage":0.53,"value":16.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.33,"value":10.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.23,"value":7.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.17,"value":5.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.1,"value":3.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.23,"value":7.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.2,"value":6.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.23,"value":7.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.07,"value":2.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.1,"value":3.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.1,"value":3.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.17,"value":5.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.1,"value":3.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.13,"value":4.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.07,"value":2.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.13,"value":4.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.07,"value":2.0}]},{"appPurchase":"2016-02-21T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-21T00:00:00Z","retentionPercentage":1.0,"value":22.0},{"date":"2016-02-22T00:00:00Z","retentionPercentage":0.23,"value":5.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.23,"value":5.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.18,"value":4.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.23,"value":5.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.18,"value":4.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.27,"value":6.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.09,"value":2.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.05,"value":1.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.05,"value":1.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.09,"value":2.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.18,"value":4.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.18,"value":4.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.14,"value":3.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.09,"value":2.0}]},{"appPurchase":"2016-02-22T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-22T00:00:00Z","retentionPercentage":1.0,"value":6.0},{"date":"2016-02-23T00:00:00Z","retentionPercentage":0.83,"value":5.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.17,"value":1.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.5,"value":3.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.33,"value":2.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.33,"value":2.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.5,"value":3.0}]},{"appPurchase":"2016-02-23T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-23T00:00:00Z","retentionPercentage":1.0,"value":25.0},{"date":"2016-02-24T00:00:00Z","retentionPercentage":0.28,"value":7.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.16,"value":4.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.36,"value":9.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.16,"value":4.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.12,"value":3.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.28,"value":7.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.44,"value":11.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.12,"value":3.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.12,"value":3.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.32,"value":8.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.08,"value":2.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.04,"value":1.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.12,"value":3.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.28,"value":7.0}]},{"appPurchase":"2016-02-24T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-24T00:00:00Z","retentionPercentage":1.0,"value":11.0},{"date":"2016-02-25T00:00:00Z","retentionPercentage":0.36,"value":4.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.36,"value":4.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.09,"value":1.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.27,"value":3.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.18,"value":2.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.09,"value":1.0}]},{"appPurchase":"2016-02-25T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-25T00:00:00Z","retentionPercentage":1.0,"value":14.0},{"date":"2016-02-26T00:00:00Z","retentionPercentage":0.36,"value":5.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.43,"value":6.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.21,"value":3.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.29,"value":4.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.14,"value":2.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.07,"value":1.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.14,"value":2.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.36,"value":5.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.21,"value":3.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.29,"value":4.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.21,"value":3.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.14,"value":2.0}]},{"appPurchase":"2016-02-26T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-26T00:00:00Z","retentionPercentage":1.0,"value":15.0},{"date":"2016-02-27T00:00:00Z","retentionPercentage":0.53,"value":8.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.33,"value":5.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.27,"value":4.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.27,"value":4.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.0,"value":0.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.13,"value":2.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.2,"value":3.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.13,"value":2.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.07,"value":1.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.07,"value":1.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.0,"value":0.0}]},{"appPurchase":"2016-02-27T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-27T00:00:00Z","retentionPercentage":1.0,"value":32.0},{"date":"2016-02-28T00:00:00Z","retentionPercentage":0.53,"value":17.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.28,"value":9.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.22,"value":7.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.19,"value":6.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.22,"value":7.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.28,"value":9.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.47,"value":15.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.31,"value":10.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.25,"value":8.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.09,"value":3.0}]},{"appPurchase":"2016-02-28T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-28T00:00:00Z","retentionPercentage":1.0,"value":49.0},{"date":"2016-02-29T00:00:00Z","retentionPercentage":0.45,"value":22.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.47,"value":23.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.39,"value":19.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.31,"value":15.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.33,"value":16.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.31,"value":15.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.2,"value":10.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.29,"value":14.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.31,"value":15.0}]},{"appPurchase":"2016-02-29T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-02-29T00:00:00Z","retentionPercentage":1.0,"value":30.0},{"date":"2016-03-01T00:00:00Z","retentionPercentage":0.4,"value":12.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.37,"value":11.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.27,"value":8.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.23,"value":7.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.27,"value":8.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.3,"value":9.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.13,"value":4.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.07,"value":2.0}]},{"appPurchase":"2016-03-01T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-01T00:00:00Z","retentionPercentage":1.0,"value":33.0},{"date":"2016-03-02T00:00:00Z","retentionPercentage":0.61,"value":20.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.48,"value":16.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.33,"value":11.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.27,"value":9.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.24,"value":8.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.18,"value":6.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.12,"value":4.0}]},{"appPurchase":"2016-03-02T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-02T00:00:00Z","retentionPercentage":1.0,"value":27.0},{"date":"2016-03-03T00:00:00Z","retentionPercentage":0.56,"value":15.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.44,"value":12.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.41,"value":11.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.37,"value":10.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.33,"value":9.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.26,"value":7.0}]},{"appPurchase":"2016-03-03T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-03T00:00:00Z","retentionPercentage":1.0,"value":24.0},{"date":"2016-03-04T00:00:00Z","retentionPercentage":0.5,"value":12.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.5,"value":12.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.38,"value":9.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.25,"value":6.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.08,"value":2.0}]},{"appPurchase":"2016-03-04T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-04T00:00:00Z","retentionPercentage":1.0,"value":31.0},{"date":"2016-03-05T00:00:00Z","retentionPercentage":0.68,"value":21.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.52,"value":16.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.29,"value":9.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.26,"value":8.0}]},{"appPurchase":"2016-03-05T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-05T00:00:00Z","retentionPercentage":1.0,"value":42.0},{"date":"2016-03-06T00:00:00Z","retentionPercentage":0.64,"value":27.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.29,"value":12.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.24,"value":10.0}]},{"appPurchase":"2016-03-06T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-06T00:00:00Z","retentionPercentage":1.0,"value":31.0},{"date":"2016-03-07T00:00:00Z","retentionPercentage":0.55,"value":17.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.29,"value":9.0}]},{"appPurchase":"2016-03-07T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-07T00:00:00Z","retentionPercentage":1.0,"value":16.0},{"date":"2016-03-08T00:00:00Z","retentionPercentage":0.5,"value":8.0}]},{"appPurchase":"2016-03-08T00:00:00Z","meetsThreshold":true,"data":[{"date":"2016-03-08T00:00:00Z","retentionPercentage":1.0,"value":33.0}]}]}
      "data/retention"
    end

    module ALTERNATIVE_DESIGNS
      # specific interface
      # measures = ['units', 'installs', 'sessions']
      # client.time_series1(measures: measures, start_time: start_t, end_time: end_t, frequency: "DAY")
      def time_series(measures: nil, start_time: nil, end_time: nil, frequency: nil)
      end

      # more generic, allow multiple input
      # user can pass his json, a hash, or a QueryObjectBuilder that implements to_json
      # and use metaprogramming for a natural interfae
      # measures = ['units', 'installs', 'sessions']
      # client.time_series2(QOB.new.measures(measures).last_7_days)
      # client.time_series2(Hash.new.merge(measures: measures, start_time: xxx, end_time: yyy, frequency: "DAY"))
      def time_series(query_object)
        # query is either string or respond to to_json
        analytics_request(:post, "data/time-series", as_json(query_object))
      end
    end

    # PROTOTYPE
    def time_series1(measures: nil, start_time: nil, end_time: nil, frequency: nil)
      analytics_request(
        :post, "data/time-series",
        request_data(measures: measures, start_time: start_time, end_time: end_time, frequency: frequency)
      )
    end

    def time_series2(query_object)
      analytics_request( :post, "data/time-series", query_object)
    end

    def sources_domainreferrer(measures: nil, start_time: nil, end_time: nil, frequency: nil)
      analytics_request(
        :post, "data/sources/domainreferrer-list",
        request_data(measures: measures, start_time: start_time, end_time: end_time, frequency: frequency)
      )
    end

    def sources_campaign(measures: nil, start_time: nil, end_time: nil, frequency: nil)
      analytics_request(
        :post, "data/sources/campaign-list",
        request_data(measures: measures, start_time: start_time, end_time: end_time, frequency: frequency)
      )
    end

    def method_missing(sym, *args, &block)
      puts "#{sym} was called with #{args} and #{block}"
    end

    private

    def request_data(measures: nil, start_time: nil, end_time: nil, frequency: nil)
      request_data = {
        adamId: [@apple_id],
        dimensionFilters: [],
        endTime: end_time,
        frequency: frequency,
        group: nil, # shouldn't be here 
        measures: measures,
        startTime: start_time
      }
    end

    # @param request_data: a string or an object that can be turned into a json
    def analytics_request(method, path, request_data)
      json = nil
      json = request_data if request_data.is_a? String
      if request_data.is_a? QOB
        request_data.adam_id([@apple_id])
      elsif request_data.is_a? Hash
        request_data[:adamId] = [@apple_id]
      end
      json = request_data.to_json if request_data.respond_to?('to_json')
      @tunes_client.analytics_request_v1(method, path, json)
      # FIXME parse errors ?
    end
  end
end
